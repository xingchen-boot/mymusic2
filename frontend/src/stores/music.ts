import***REMOVED***{***REMOVED***defineStore***REMOVED***}***REMOVED***from***REMOVED***'pinia'
import***REMOVED***{***REMOVED***ref,***REMOVED***computed***REMOVED***}***REMOVED***from***REMOVED***'vue'
import***REMOVED***axios***REMOVED***from***REMOVED***'axios'
import***REMOVED***{***REMOVED***useUserStore***REMOVED***}***REMOVED***from***REMOVED***'./user'

export***REMOVED***interface***REMOVED***Music***REMOVED***{
***REMOVED******REMOVED***id:***REMOVED***number
***REMOVED******REMOVED***mid:***REMOVED***string
***REMOVED******REMOVED***song:***REMOVED***string
***REMOVED******REMOVED***singer:***REMOVED***string
***REMOVED******REMOVED***album:***REMOVED***string
***REMOVED******REMOVED***cover:***REMOVED***string
***REMOVED******REMOVED***time?:***REMOVED***string
***REMOVED******REMOVED***pay?:***REMOVED***string
}

export***REMOVED***interface***REMOVED***Playlist***REMOVED***{
***REMOVED******REMOVED***id:***REMOVED***number
***REMOVED******REMOVED***name:***REMOVED***string
***REMOVED******REMOVED***description:***REMOVED***string
***REMOVED******REMOVED***cover:***REMOVED***string
***REMOVED******REMOVED***userId:***REMOVED***number
***REMOVED******REMOVED***createdAt:***REMOVED***string
***REMOVED******REMOVED***updatedAt:***REMOVED***string
***REMOVED******REMOVED***musicList?:***REMOVED***PlaylistMusic[]
***REMOVED******REMOVED***musicCount:***REMOVED***number
}

export***REMOVED***interface***REMOVED***PlaylistMusic***REMOVED***{
***REMOVED******REMOVED***id:***REMOVED***number
***REMOVED******REMOVED***playlistId:***REMOVED***number
***REMOVED******REMOVED***musicId:***REMOVED***number
***REMOVED******REMOVED***musicMid:***REMOVED***string
***REMOVED******REMOVED***musicSong:***REMOVED***string
***REMOVED******REMOVED***musicSinger:***REMOVED***string
***REMOVED******REMOVED***musicAlbum:***REMOVED***string
***REMOVED******REMOVED***musicCover:***REMOVED***string
***REMOVED******REMOVED***musicUrl:***REMOVED***string
***REMOVED******REMOVED***sortOrder:***REMOVED***number
***REMOVED******REMOVED***addedAt:***REMOVED***string
}

export***REMOVED***const***REMOVED***useMusicStore***REMOVED***=***REMOVED***defineStore('music',***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED***//***REMOVED***Áî®Êà∑storeÂºïÁî®
***REMOVED******REMOVED***const***REMOVED***userStore***REMOVED***=***REMOVED***useUserStore()
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***currentMusic***REMOVED***=***REMOVED***ref<Music***REMOVED***|***REMOVED***null>(null)
***REMOVED******REMOVED***const***REMOVED***musicList***REMOVED***=***REMOVED***ref<Music[]>([])
***REMOVED******REMOVED***const***REMOVED***isPlaying***REMOVED***=***REMOVED***ref(false)
***REMOVED******REMOVED***const***REMOVED***isLoading***REMOVED***=***REMOVED***ref(false)
***REMOVED******REMOVED***const***REMOVED***searchKeyword***REMOVED***=***REMOVED***ref('')
***REMOVED******REMOVED***const***REMOVED***audio***REMOVED***=***REMOVED***ref<HTMLAudioElement***REMOVED***|***REMOVED***null>(null)
***REMOVED******REMOVED***const***REMOVED***currentTime***REMOVED***=***REMOVED***ref(0)
***REMOVED******REMOVED***const***REMOVED***duration***REMOVED***=***REMOVED***ref(0)
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Êó†ÈôêÊªöÂä®Áõ∏ÂÖ≥Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***currentPage***REMOVED***=***REMOVED***ref(1)
***REMOVED******REMOVED***const***REMOVED***hasMoreData***REMOVED***=***REMOVED***ref(true)
***REMOVED******REMOVED***const***REMOVED***isLoadingMore***REMOVED***=***REMOVED***ref(false)
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈòüÂàóÁõ∏ÂÖ≥Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***playQueue***REMOVED***=***REMOVED***ref<Music[]>([])
***REMOVED******REMOVED***const***REMOVED***showPlayQueue***REMOVED***=***REMOVED***ref(false)
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Èü≥ÈáèÊéßÂà∂Áõ∏ÂÖ≥Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***volume***REMOVED***=***REMOVED***ref(70)***REMOVED***//***REMOVED***ÈªòËÆ§Èü≥Èáè70%
***REMOVED******REMOVED***const***REMOVED***isMuted***REMOVED***=***REMOVED***ref(false)***REMOVED***//***REMOVED***ÊòØÂê¶ÈùôÈü≥
***REMOVED******REMOVED***const***REMOVED***previousVolume***REMOVED***=***REMOVED***ref(70)***REMOVED***//***REMOVED***ÈùôÈü≥ÂâçÁöÑÈü≥Èáè
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÊ®°ÂºèÁõ∏ÂÖ≥Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***playMode***REMOVED***=***REMOVED***ref('list')***REMOVED***//***REMOVED***list:***REMOVED***ÂàóË°®Âæ™ÁéØ,***REMOVED***single:***REMOVED***ÂçïÊõ≤Âæ™ÁéØ,***REMOVED***random:***REMOVED***ÈöèÊú∫Êí≠Êîæ
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Êî∂ËóèÁõ∏ÂÖ≥Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***isCurrentMusicLiked***REMOVED***=***REMOVED***ref(false)***REMOVED***//***REMOVED***ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÊòØÂê¶Â∑≤Êî∂Ëóè
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Èò≤ÊäñÁõ∏ÂÖ≥Áä∂ÊÄÅ
***REMOVED******REMOVED***let***REMOVED***progressSyncTimer:***REMOVED***NodeJS.Timeout***REMOVED***|***REMOVED***null***REMOVED***=***REMOVED***null

***REMOVED******REMOVED***//***REMOVED***ËÆ°ÁÆóÂ±ûÊÄß
***REMOVED******REMOVED***const***REMOVED***hasCurrentMusic***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***currentMusic.value***REMOVED***!==***REMOVED***null)
***REMOVED******REMOVED***const***REMOVED***progress***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(duration.value***REMOVED***===***REMOVED***0)***REMOVED***return***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***(currentTime.value***REMOVED***/***REMOVED***duration.value)***REMOVED*******REMOVED***100
***REMOVED******REMOVED***})
***REMOVED******REMOVED***const***REMOVED***queueCount***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***playQueue.value.length)
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÊ®°ÂºèÂõæÊ†á
***REMOVED******REMOVED***const***REMOVED***playModeIcon***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***switch***REMOVED***(playMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'list':***REMOVED***return***REMOVED***'üîÅ'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'single':***REMOVED***return***REMOVED***'üîÇ'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'random':***REMOVED***return***REMOVED***'üîÄ'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***return***REMOVED***'üîÅ'
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***})
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÊ®°ÂºèÂêçÁß∞
***REMOVED******REMOVED***const***REMOVED***playModeName***REMOVED***=***REMOVED***computed(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***switch***REMOVED***(playMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'list':***REMOVED***return***REMOVED***'ÂàóË°®Âæ™ÁéØ'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'single':***REMOVED***return***REMOVED***'ÂçïÊõ≤Âæ™ÁéØ'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'random':***REMOVED***return***REMOVED***'ÈöèÊú∫Êí≠Êîæ'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***default:***REMOVED***return***REMOVED***'ÂàóË°®Âæ™ÁéØ'
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***})

***REMOVED******REMOVED***//***REMOVED***ÂàùÂßãÂåñÈü≥È¢ë
***REMOVED******REMOVED***const***REMOVED***initAudio***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value***REMOVED***=***REMOVED***new***REMOVED***Audio()
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ËÆæÁΩÆÂàùÂßãÈü≥Èáè
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***volume.value***REMOVED***/***REMOVED***100
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.addEventListener('timeupdate',***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentTime.value***REMOVED***=***REMOVED***audio.value?.currentTime***REMOVED***||***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊØè1ÁßíÂêåÊ≠•‰∏ÄÊ¨°Êí≠ÊîæËøõÂ∫¶Âà∞Êï∞ÊçÆÂ∫ìÔºåÊèêÈ´òÂêåÊ≠•È¢ëÁéá
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(Math.floor(currentTime.value)***REMOVED***%***REMOVED***1***REMOVED***===***REMOVED***0***REMOVED***&&***REMOVED***currentTime.value***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***syncPlayProgressToDatabase()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.addEventListener('loadedmetadata',***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***duration.value***REMOVED***=***REMOVED***audio.value?.duration***REMOVED***||***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.addEventListener('ended',***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ëá™Âä®Êí≠Êîæ‰∏ã‰∏ÄÈ¶ñ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playNext()
***REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***È°µÈù¢Âç∏ËΩΩÊó∂Á´ãÂç≥ÂêåÊ≠•Êí≠ÊîæËøõÂ∫¶
***REMOVED******REMOVED******REMOVED******REMOVED***window.addEventListener('beforeunload',***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(audio.value***REMOVED***&&***REMOVED***currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***‰ΩøÁî®Á´ãÂç≥ÂêåÊ≠•ÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***syncPlayProgressImmediately()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***È°µÈù¢ÈöêËóèÊó∂ÂêåÊ≠•Êí≠ÊîæËøõÂ∫¶
***REMOVED******REMOVED******REMOVED******REMOVED***document.addEventListener('visibilitychange',***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(document.hidden***REMOVED***&&***REMOVED***audio.value***REMOVED***&&***REMOVED***currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***syncPlayProgressToDatabase()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÊêúÁ¥¢Èü≥‰πêÔºàÈ¶ñÊ¨°ÊêúÁ¥¢Ôºâ
***REMOVED******REMOVED***const***REMOVED***searchMusic***REMOVED***=***REMOVED***async***REMOVED***(keyword:***REMOVED***string)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!keyword.trim())***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***isLoading.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***searchKeyword.value***REMOVED***=***REMOVED***keyword
***REMOVED******REMOVED******REMOVED******REMOVED***currentPage.value***REMOVED***=***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***musicList.value***REMOVED***=***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîç***REMOVED***ÂºÄÂßãÊêúÁ¥¢Èü≥‰πêÔºåÂÖ≥ÈîÆËØç:',***REMOVED***keyword)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***apiUrl***REMOVED***=***REMOVED***'/api/music/search'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***params***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***keyword:***REMOVED***keyword,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***page:***REMOVED***1,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***size:***REMOVED***20
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üì°***REMOVED***Ë∞ÉÁî®ÂêéÁ´ØAPI:',***REMOVED***apiUrl,***REMOVED***params)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***res***REMOVED***=***REMOVED***await***REMOVED***axios.get(apiUrl,***REMOVED***{***REMOVED***params***REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***ÂêéÁ´ØAPIÂìçÂ∫î:',***REMOVED***res.data)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(res.data.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newMusicList***REMOVED***=***REMOVED***res.data.data***REMOVED***||***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***musicList.value***REMOVED***=***REMOVED***newMusicList
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê£ÄÊü•ÊòØÂê¶ËøòÊúâÊõ¥Â§öÊï∞ÊçÆ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData.value***REMOVED***=***REMOVED***newMusicList.length***REMOVED***>=***REMOVED***20
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üéµ***REMOVED***È¶ñÊ¨°ÊêúÁ¥¢ÂÆåÊàêÔºåËé∑Âæó',***REMOVED***newMusicList.length,***REMOVED***'È¶ñÊ≠åÊõ≤')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üìÑ***REMOVED***ÊòØÂê¶ËøòÊúâÊõ¥Â§öÊï∞ÊçÆ:',***REMOVED***hasMoreData.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error(res.data.message***REMOVED***||***REMOVED***'ÊêúÁ¥¢Â§±Ë¥•')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error:***REMOVED***any)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÊêúÁ¥¢Èü≥‰πêÂ§±Ë¥•:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('ÈîôËØØËØ¶ÊÉÖ:',***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***message:***REMOVED***error.message,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***status:***REMOVED***error.response?.status,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***statusText:***REMOVED***error.response?.statusText,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***data:***REMOVED***error.response?.data
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***musicList.value***REMOVED***=***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***finally***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isLoading.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Âä†ËΩΩÊõ¥Â§öÈü≥‰πê
***REMOVED******REMOVED***const***REMOVED***loadMoreMusic***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!hasMoreData.value***REMOVED***||***REMOVED***isLoadingMore.value***REMOVED***||***REMOVED***!searchKeyword.value.trim())***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***isLoadingMore.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextPage***REMOVED***=***REMOVED***currentPage.value***REMOVED***+***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üìÑ***REMOVED***Âä†ËΩΩÊõ¥Â§öÈü≥‰πêÔºåÈ°µÁ†Å:',***REMOVED***nextPage)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***apiUrl***REMOVED***=***REMOVED***'/api/music/search'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***params***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***keyword:***REMOVED***searchKeyword.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***page:***REMOVED***nextPage,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***size:***REMOVED***20
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***res***REMOVED***=***REMOVED***await***REMOVED***axios.get(apiUrl,***REMOVED***{***REMOVED***params***REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(res.data.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newMusicList***REMOVED***=***REMOVED***res.data.data***REMOVED***||***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(newMusicList.length***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â∞ÜÊñ∞Êï∞ÊçÆËøΩÂä†Âà∞Áé∞ÊúâÂàóË°®
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***musicList.value***REMOVED***=***REMOVED***[...musicList.value,***REMOVED***...newMusicList]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentPage.value***REMOVED***=***REMOVED***nextPage
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê£ÄÊü•ÊòØÂê¶ËøòÊúâÊõ¥Â§öÊï∞ÊçÆ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData.value***REMOVED***=***REMOVED***newMusicList.length***REMOVED***>=***REMOVED***20
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Âä†ËΩΩÊõ¥Â§öÊàêÂäüÔºåÊñ∞Â¢û',***REMOVED***newMusicList.length,***REMOVED***'È¶ñÊ≠åÊõ≤')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üìä***REMOVED***ÊÄªÊ≠åÊõ≤Êï∞:',***REMOVED***musicList.value.length)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üìÑ***REMOVED***ÊòØÂê¶ËøòÊúâÊõ¥Â§öÊï∞ÊçÆ:',***REMOVED***hasMoreData.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üìÑ***REMOVED***Ê≤°ÊúâÊõ¥Â§öÊï∞ÊçÆ‰∫Ü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error(res.data.message***REMOVED***||***REMOVED***'Âä†ËΩΩÊõ¥Â§öÂ§±Ë¥•')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Âä†ËΩΩÊõ¥Â§öÈü≥‰πêÂ§±Ë¥•:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***finally***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isLoadingMore.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***const***REMOVED***getMusicPlayUrl***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***apiUrl***REMOVED***=***REMOVED***'/api/music/url'
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***params***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***...(music.mid***REMOVED***?***REMOVED***{***REMOVED***mid***REMOVED***:***REMOVED***music.mid***REMOVED***}***REMOVED***:***REMOVED***{***REMOVED***id***REMOVED***:***REMOVED***music.id***REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üéµ***REMOVED***Ëé∑ÂèñÊí≠ÊîæURL:',***REMOVED***apiUrl,***REMOVED***params)

***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***res***REMOVED***=***REMOVED***await***REMOVED***axios.get(apiUrl,***REMOVED***{***REMOVED***params***REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED***if(res.data.code***REMOVED***!==***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error(res.data.message***REMOVED***||***REMOVED***'Ëé∑ÂèñÊí≠ÊîæURLÂ§±Ë¥•')
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***if(!res.data.data?.url)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error('Ëé∑ÂèñÈü≥‰πêÊí≠ÊîæURLÂ§±Ë¥•')
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***return***REMOVED***res.data.data
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***‰∏ãËΩΩÈü≥‰πê
***REMOVED******REMOVED***const***REMOVED***downloadMusic***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚¨áÔ∏è***REMOVED***ÂºÄÂßã‰∏ãËΩΩÈü≥‰πê:',***REMOVED***music.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ëé∑ÂèñÈü≥‰πêÊí≠ÊîæURLÔºàËøô‰∏™URLÂ∞±ÊòØÈü≥‰πêÊñá‰ª∂ÁöÑÁõ¥ÈìæÔºâ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***musicData***REMOVED***=***REMOVED***await***REMOVED***getMusicPlayUrl(music)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!musicData.url)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error('Ëé∑ÂèñÈü≥‰πê‰∏ãËΩΩÈìæÊé•Â§±Ë¥•')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***‰ΩøÁî®fetchËé∑ÂèñÊñá‰ª∂ÂÜÖÂÆπ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(musicData.url,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'GET',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***headers:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'User-Agent':***REMOVED***'Mozilla/5.0***REMOVED***(Windows***REMOVED***NT***REMOVED***10.0;***REMOVED***Win64;***REMOVED***x64)***REMOVED***AppleWebKit/537.36'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!response.ok)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***new***REMOVED***Error(`‰∏ãËΩΩÂ§±Ë¥•:***REMOVED***${response.status}***REMOVED***${response.statusText}`)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ëé∑ÂèñÊñá‰ª∂ÂÜÖÂÆπ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***blob***REMOVED***=***REMOVED***await***REMOVED***response.blob()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂàõÂª∫blob***REMOVED***URL
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***blobUrl***REMOVED***=***REMOVED***URL.createObjectURL(blob)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂàõÂª∫‰∏ãËΩΩÈìæÊé•
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***link***REMOVED***=***REMOVED***document.createElement('a')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***link.href***REMOVED***=***REMOVED***blobUrl
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***link.download***REMOVED***=***REMOVED***`${music.song}***REMOVED***-***REMOVED***${music.singer}.${musicData.format***REMOVED***||***REMOVED***'mp3'}`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ëß¶Âèë‰∏ãËΩΩ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***document.body.appendChild(link)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***link.click()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***document.body.removeChild(link)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê∏ÖÁêÜblob***REMOVED***URL
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***setTimeout(()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***URL.revokeObjectURL(blobUrl)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***1000)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Èü≥‰πê‰∏ãËΩΩÂ∑≤ÂºÄÂßã:',***REMOVED***music.song)
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***‰∏ãËΩΩÈü≥‰πêÂ§±Ë¥•:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***throw***REMOVED***error
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈü≥‰πê
***REMOVED******REMOVED***const***REMOVED***playMusic***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûúÁÇπÂáªÁöÑÊòØÂΩìÂâçÊ≠£Âú®Êí≠ÊîæÁöÑÈü≥‰πêÔºåÂàôÂàáÊç¢Êí≠Êîæ/ÊöÇÂÅúÁä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentMusic.value***REMOVED***&&***REMOVED***currentMusic.value.id***REMOVED***===***REMOVED***music.id)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***togglePlay()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂÖàÊ∑ªÂä†Âà∞ÈòüÂàóÔºàÂ¶ÇÊûú‰∏çÂú®ÈòüÂàó‰∏≠Êâç‰ºöÊ∑ªÂä†Ôºâ
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***addToPlayQueueWithSync(music)
***REMOVED******REMOVED******REMOVED******REMOVED***currentMusic.value***REMOVED***=***REMOVED***music
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê£ÄÊü•ÂΩìÂâçÈü≥‰πêÊòØÂê¶Â∑≤Êî∂Ëóè
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***checkCurrentMusicFavoriteStatus()
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***musicData***REMOVED***=***REMOVED***await***REMOVED***getMusicPlayUrl(music)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if(!audio.value.paused***REMOVED***)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.pause()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.src***REMOVED***=***REMOVED***musicData.url
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***audio.value.play()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncCurrentMusicToDatabase(music,***REMOVED***musicData.url)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üéµ***REMOVED***ÂºÄÂßãÊí≠Êîæ:',***REMOVED***music.song)
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('Êí≠ÊîæÈü≥‰πêÂ§±Ë¥•:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.src***REMOVED***=***REMOVED***''
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentMusic.value***REMOVED***=***REMOVED***null
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÊöÇÂÅú/ÁªßÁª≠Êí≠Êîæ
***REMOVED******REMOVED***const***REMOVED***togglePlay***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value***REMOVED***||***REMOVED***!currentMusic.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isPlaying.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.pause()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚è∏Ô∏è***REMOVED***ÊöÇÂÅúÊí≠Êîæ')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***audio.value.play()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ñ∂Ô∏è***REMOVED***ÁªßÁª≠Êí≠Êîæ')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Êí≠ÊîæÁä∂ÊÄÅÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayStatusToDatabase()
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('ÂàáÊç¢Êí≠ÊîæÁä∂ÊÄÅÂ§±Ë¥•:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÂÅúÊ≠¢Êí≠Êîæ
***REMOVED******REMOVED***const***REMOVED***stopMusic***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.pause()
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.currentTime***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ËÆæÁΩÆÊí≠ÊîæËøõÂ∫¶
***REMOVED******REMOVED***const***REMOVED***setProgress***REMOVED***=***REMOVED***async***REMOVED***(percent:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value***REMOVED***||***REMOVED***!duration.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***time***REMOVED***=***REMOVED***(percent***REMOVED***/***REMOVED***100)***REMOVED*******REMOVED***duration.value
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.currentTime***REMOVED***=***REMOVED***time
***REMOVED******REMOVED******REMOVED******REMOVED***currentTime.value***REMOVED***=***REMOVED***time
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Á´ãÂç≥ÂêåÊ≠•Êí≠ÊîæËøõÂ∫¶Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayProgressToDatabase()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***==========***REMOVED***Èü≥ÈáèÊéßÂà∂Áõ∏ÂÖ≥ÊñπÊ≥ï***REMOVED***==========
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ËÆæÁΩÆÈü≥Èáè
***REMOVED******REMOVED***const***REMOVED***setVolume***REMOVED***=***REMOVED***async***REMOVED***(newVolume:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***volume.value***REMOVED***=***REMOVED***Math.max(0,***REMOVED***Math.min(100,***REMOVED***newVolume))***REMOVED***//***REMOVED***ÈôêÂà∂Âú®0-100‰πãÈó¥
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(audio.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***volume.value***REMOVED***/***REMOVED***100
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûúËÆæÁΩÆÈü≥ÈáèÂ§ß‰∫é0ÔºåÂèñÊ∂àÈùôÈü≥
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(volume.value***REMOVED***>***REMOVED***0***REMOVED***&&***REMOVED***isMuted.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isMuted.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncVolumeToDatabase()
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîä***REMOVED***Èü≥ÈáèËÆæÁΩÆ‰∏∫:',***REMOVED***volume.value***REMOVED***+***REMOVED***'%')
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂàáÊç¢ÈùôÈü≥Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***toggleMute***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isMuted.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂèñÊ∂àÈùôÈü≥ÔºåÊÅ¢Â§ç‰πãÂâçÁöÑÈü≥Èáè
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isMuted.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***volume.value***REMOVED***=***REMOVED***previousVolume.value
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***volume.value***REMOVED***/***REMOVED***100
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîä***REMOVED***ÂèñÊ∂àÈùôÈü≥ÔºåÈü≥Èáè:',***REMOVED***volume.value***REMOVED***+***REMOVED***'%')
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÈùôÈü≥Ôºå‰øùÂ≠òÂΩìÂâçÈü≥Èáè
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***previousVolume.value***REMOVED***=***REMOVED***volume.value
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isMuted.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***volume.value***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîá***REMOVED***ÈùôÈü≥')
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncMuteStatusToDatabase()
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÈùôÈü≥
***REMOVED******REMOVED***const***REMOVED***mute***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value***REMOVED***||***REMOVED***isMuted.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***previousVolume.value***REMOVED***=***REMOVED***volume.value
***REMOVED******REMOVED******REMOVED******REMOVED***isMuted.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîá***REMOVED***ÈùôÈü≥')
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂèñÊ∂àÈùôÈü≥
***REMOVED******REMOVED***const***REMOVED***unmute***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value***REMOVED***||***REMOVED***!isMuted.value)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***isMuted.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***volume.value***REMOVED***=***REMOVED***previousVolume.value
***REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***volume.value***REMOVED***/***REMOVED***100
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîä***REMOVED***ÂèñÊ∂àÈùôÈü≥ÔºåÈü≥Èáè:',***REMOVED***volume.value***REMOVED***+***REMOVED***'%')
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***==========***REMOVED***Êí≠ÊîæËÆæÁΩÆÊï∞ÊçÆÂ∫ìÂêåÊ≠•ÊñπÊ≥ï***REMOVED***==========
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Èü≥ÈáèÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED***const***REMOVED***syncVolumeToDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•Èü≥ÈáèÂà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-settings/volume/${userStore.currentUser.id}?volume=${volume.value}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Èü≥ÈáèÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Èü≥ÈáèÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Èü≥ÈáèÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•ÈùôÈü≥Áä∂ÊÄÅÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED***const***REMOVED***syncMuteStatusToDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•ÈùôÈü≥Áä∂ÊÄÅÂà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-settings/mute/${userStore.currentUser.id}?isMuted=${isMuted.value}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***ÈùôÈü≥Áä∂ÊÄÅÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÈùôÈü≥Áä∂ÊÄÅÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÈùôÈü≥Áä∂ÊÄÅÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Êí≠ÊîæÊ®°ÂºèÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED***const***REMOVED***syncPlayModeToDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•Êí≠ÊîæÊ®°ÂºèÂà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-settings/play-mode/${userStore.currentUser.id}?playMode=${playMode.value}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæÊ®°ÂºèÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÊ®°ÂºèÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÊ®°ÂºèÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Êí≠ÊîæËøõÂ∫¶Âà∞Êï∞ÊçÆÂ∫ìÔºàÂ∏¶Èò≤ÊäñÔºâ
***REMOVED******REMOVED***const***REMOVED***syncPlayProgressToDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•Êí≠ÊîæËøõÂ∫¶Âà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê∏ÖÈô§‰πãÂâçÁöÑÂÆöÊó∂Âô®
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(progressSyncTimer)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***clearTimeout(progressSyncTimer)
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ËÆæÁΩÆÊñ∞ÁöÑÂÆöÊó∂Âô®Ôºå200msÂêéÊâßË°åÂêåÊ≠•
***REMOVED******REMOVED******REMOVED******REMOVED***progressSyncTimer***REMOVED***=***REMOVED***setTimeout(async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***url***REMOVED***=***REMOVED***`http://localhost:9092/api/user-play-settings/play-progress/${userStore.currentUser.id}?playProgress=${progress.value}&playTime=${currentTime.value}`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***‰ΩøÁî®fetch***REMOVED***with***REMOVED***keepaliveÁ°Æ‰øùËØ∑Ê±ÇËÉΩÂÆåÊàê
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(url,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***keepalive:***REMOVED***true***REMOVED***//***REMOVED***Á°Æ‰øùËØ∑Ê±ÇÂú®È°µÈù¢Âç∏ËΩΩÊó∂‰πüËÉΩÂÆåÊàê
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæËøõÂ∫¶ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæËøõÂ∫¶ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæËøõÂ∫¶ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***},***REMOVED***200)
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Á´ãÂç≥ÂêåÊ≠•Êí≠ÊîæËøõÂ∫¶Âà∞Êï∞ÊçÆÂ∫ìÔºàÁî®‰∫éÈ°µÈù¢Âç∏ËΩΩÊó∂Ôºâ
***REMOVED******REMOVED***const***REMOVED***syncPlayProgressImmediately***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***url***REMOVED***=***REMOVED***`http://localhost:9092/api/user-play-settings/play-progress/${userStore.currentUser.id}?playProgress=${progress.value}&playTime=${currentTime.value}`
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***‰ΩøÁî®ÂêåÊ≠•ËØ∑Ê±ÇÁ°Æ‰øùÊï∞ÊçÆËÉΩÂèëÈÄÅÂá∫Âéª
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***xhr***REMOVED***=***REMOVED***new***REMOVED***XMLHttpRequest()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***xhr.open('PUT',***REMOVED***url,***REMOVED***false)***REMOVED***//***REMOVED***ÂêåÊ≠•ËØ∑Ê±Ç
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***xhr.setRequestHeader('Content-Type',***REMOVED***'application/json')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***xhr.send()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(xhr.status***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæËøõÂ∫¶Á´ãÂç≥ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæËøõÂ∫¶Á´ãÂç≥ÂêåÊ≠•Â§±Ë¥•ÔºåÁä∂ÊÄÅÁ†Å:',***REMOVED***xhr.status)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæËøõÂ∫¶Á´ãÂç≥ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED***const***REMOVED***syncCurrentMusicToDatabase***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music,***REMOVED***musicUrl:***REMOVED***string)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-settings/current-music/${userStore.currentUser.id}?musicId=${music.id}&musicName=${encodeURIComponent(music.song)}&musicArtist=${encodeURIComponent(music.singer)}&musicCover=${encodeURIComponent(music.cover)}&musicUrl=${encodeURIComponent(musicUrl)}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Êí≠ÊîæÁä∂ÊÄÅÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED***const***REMOVED***syncPlayStatusToDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•Êí≠ÊîæÁä∂ÊÄÅÂà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-settings/play-status/${userStore.currentUser.id}?isPlaying=${isPlaying.value}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæÁä∂ÊÄÅÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÁä∂ÊÄÅÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÁä∂ÊÄÅÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ìÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***‰ªéÊï∞ÊçÆÂ∫ìÂä†ËΩΩÊí≠ÊîæËÆæÁΩÆ
***REMOVED******REMOVED***const***REMOVED***loadPlaySettingsFromDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂä†ËΩΩÊí≠ÊîæËÆæÁΩÆ')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÑ***REMOVED***ÂºÄÂßãÂä†ËΩΩÁî®Êà∑Êí≠ÊîæËÆæÁΩÆÔºåÁî®Êà∑ID:',***REMOVED***userStore.currentUser.id)

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-settings/user/${userStore.currentUser.id}`)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üì°***REMOVED***Êí≠ÊîæËÆæÁΩÆAPIÂìçÂ∫î:',***REMOVED***result)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(result.code***REMOVED***===***REMOVED***200***REMOVED***&&***REMOVED***result.data)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***settings***REMOVED***=***REMOVED***result.data
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊÅ¢Â§çÈü≥ÈáèËÆæÁΩÆ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***volume.value***REMOVED***=***REMOVED***settings.volume***REMOVED***||***REMOVED***70
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(audio.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***volume.value***REMOVED***/***REMOVED***100
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊÅ¢Â§çÈùôÈü≥Áä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isMuted.value***REMOVED***=***REMOVED***settings.isMuted***REMOVED***||***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isMuted.value***REMOVED***&&***REMOVED***audio.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.volume***REMOVED***=***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊÅ¢Â§çÊí≠ÊîæÊ®°Âºè
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playMode.value***REMOVED***=***REMOVED***settings.playMode***REMOVED***||***REMOVED***'list'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊÅ¢Â§çÂΩìÂâçÊí≠ÊîæÈü≥‰πêÂíåËøõÂ∫¶
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(settings.currentMusicId***REMOVED***&&***REMOVED***settings.currentMusicName)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***music:***REMOVED***Music***REMOVED***=***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***id:***REMOVED***parseInt(settings.currentMusicId),
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***mid:***REMOVED***settings.currentMusicId,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***song:***REMOVED***settings.currentMusicName,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***singer:***REMOVED***settings.currentMusicArtist***REMOVED***||***REMOVED***'',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***album:***REMOVED***'',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***cover:***REMOVED***settings.currentMusicCover***REMOVED***||***REMOVED***'',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***time:***REMOVED***'',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***pay:***REMOVED***''
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentMusic.value***REMOVED***=***REMOVED***music
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûúÊúâÊí≠ÊîæURLÔºåËÆæÁΩÆÈü≥È¢ëÊ∫ê
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(settings.currentMusicUrl***REMOVED***&&***REMOVED***audio.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.src***REMOVED***=***REMOVED***settings.currentMusicUrl
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***audio.value.currentTime***REMOVED***=***REMOVED***settings.playTime***REMOVED***||***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentTime.value***REMOVED***=***REMOVED***settings.playTime***REMOVED***||***REMOVED***0
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊÅ¢Â§çÊí≠ÊîæÁä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***settings.isPlaying***REMOVED***||***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûú‰πãÂâçÊòØÊí≠ÊîæÁä∂ÊÄÅÔºåÂ∞ùËØïÁªßÁª≠Êí≠Êîæ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(settings.isPlaying***REMOVED***&&***REMOVED***audio.value***REMOVED***&&***REMOVED***settings.currentMusicUrl)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***audio.value.play()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ñ∂Ô∏è***REMOVED***ÊÅ¢Â§çÊí≠ÊîæÁä∂ÊÄÅÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ö†Ô∏è***REMOVED***ÊÅ¢Â§çÊí≠ÊîæÁä∂ÊÄÅÂ§±Ë¥•ÔºåÂèØËÉΩÈúÄË¶ÅÁî®Êà∑‰∫§‰∫í:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæËÆæÁΩÆÂä†ËΩΩÊàêÂäü:',***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***volume:***REMOVED***volume.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isMuted:***REMOVED***isMuted.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playMode:***REMOVED***playMode.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***currentMusic:***REMOVED***music.song,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playTime:***REMOVED***settings.playTime,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isPlaying:***REMOVED***isPlaying.value
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæËÆæÁΩÆÂä†ËΩΩÊàêÂäüÔºàÊó†ÂΩìÂâçÈü≥‰πêÔºâ:',***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***volume:***REMOVED***volume.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isMuted:***REMOVED***isMuted.value,
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playMode:***REMOVED***playMode.value
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ÑπÔ∏è***REMOVED***Áî®Êà∑Ê≤°Êúâ‰øùÂ≠òÁöÑÊí≠ÊîæËÆæÁΩÆÔºå‰ΩøÁî®ÈªòËÆ§ËÆæÁΩÆ')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Âä†ËΩΩÊí≠ÊîæËÆæÁΩÆÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***==========***REMOVED***Êí≠ÊîæÈòüÂàóÁõ∏ÂÖ≥ÊñπÊ≥ï***REMOVED***==========
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***Ê∑ªÂä†Èü≥‰πêÂà∞Êí≠ÊîæÈòüÂàó
***REMOVED******REMOVED***const***REMOVED***addToQueue***REMOVED***=***REMOVED***(music:***REMOVED***Music,***REMOVED***insertIndex?:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂú®ÈòüÂàó‰∏≠
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***existingIndex***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***music.id)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(existingIndex***REMOVED***>***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûúÂ∑≤Â≠òÂú®Ôºå‰∏çÊîπÂèò‰ΩçÁΩÆÔºåÁõ¥Êé•ËøîÂõû
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üéµ***REMOVED***Èü≥‰πêÂ∑≤Âú®Êí≠ÊîæÈòüÂàó‰∏≠Ôºå‰øùÊåÅÂéü‰ΩçÁΩÆ:',***REMOVED***music.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊâæÂà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤ÁöÑ‰ΩçÁΩÆÔºåÊèíÂÖ•Âà∞ÂÖ∂‰∏ãÈù¢
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***finalInsertIndex***REMOVED***=***REMOVED***insertIndex***REMOVED***!==***REMOVED***undefined***REMOVED***?***REMOVED***insertIndex***REMOVED***:***REMOVED***playQueue.value.length***REMOVED***//***REMOVED***ÈªòËÆ§ÊèíÂÖ•Âà∞ÈòüÂ∞æ
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(insertIndex***REMOVED***===***REMOVED***undefined***REMOVED***&&***REMOVED***currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentIndex***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***currentMusic.value?.id)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentIndex***REMOVED***>***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***finalInsertIndex***REMOVED***=***REMOVED***currentIndex***REMOVED***+***REMOVED***1***REMOVED***//***REMOVED***ÊèíÂÖ•Âà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤ÁöÑ‰∏ãÈù¢
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊèíÂÖ•Ê≠åÊõ≤
***REMOVED******REMOVED******REMOVED******REMOVED***playQueue.value.splice(finalInsertIndex,***REMOVED***0,***REMOVED***music)
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üéµ***REMOVED***Ê∑ªÂä†Èü≥‰πêÂà∞Êí≠ÊîæÈòüÂàó:',***REMOVED***music.song)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***‰ªéÊí≠ÊîæÈòüÂàóÁßªÈô§Èü≥‰πê
***REMOVED******REMOVED***const***REMOVED***removeFromQueue***REMOVED***=***REMOVED***(musicId:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***index***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***musicId)
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(index***REMOVED***>***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playQueue.value.splice(index,***REMOVED***1)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üóëÔ∏è***REMOVED***‰ªéÊí≠ÊîæÈòüÂàóÁßªÈô§Èü≥‰πê')
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Ê∏ÖÁ©∫Êí≠ÊîæÈòüÂàó
***REMOVED******REMOVED***const***REMOVED***clearQueue***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***playQueue.value***REMOVED***=***REMOVED***[]
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üóëÔ∏è***REMOVED***Ê∏ÖÁ©∫Êí≠ÊîæÈòüÂàó')
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Êí≠Êîæ‰∏ã‰∏ÄÈ¶ñ
***REMOVED******REMOVED***const***REMOVED***playNext***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value***REMOVED***||***REMOVED***playQueue.value.length***REMOVED***===***REMOVED***0)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentIndex***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***currentMusic.value?.id)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***switch***REMOVED***(playMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'list':
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂàóË°®Âæ™ÁéØÔºöÊí≠Êîæ‰∏ã‰∏ÄÈ¶ñÔºåÂà∞ÊúÄÂêé‰∏ÄÈ¶ñÊó∂ÂõûÂà∞Á¨¨‰∏ÄÈ¶ñ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextIndex***REMOVED***=***REMOVED***currentIndex***REMOVED***+***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(nextIndex***REMOVED***<***REMOVED***playQueue.value.length)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextMusic***REMOVED***=***REMOVED***playQueue.value[nextIndex]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚è≠Ô∏è***REMOVED***ÂàóË°®Âæ™ÁéØ***REMOVED***-***REMOVED***Êí≠Êîæ‰∏ã‰∏ÄÈ¶ñ:',***REMOVED***nextMusic.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(nextMusic)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÁ¨¨‰∏ÄÈ¶ñ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***firstMusic***REMOVED***=***REMOVED***playQueue.value[0]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚è≠Ô∏è***REMOVED***ÂàóË°®Âæ™ÁéØ***REMOVED***-***REMOVED***ÂõûÂà∞Á¨¨‰∏ÄÈ¶ñ:',***REMOVED***firstMusic.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(firstMusic)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'single':
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂçïÊõ≤Âæ™ÁéØÔºöÈáçÂ§çÊí≠ÊîæÂΩìÂâçÊ≠åÊõ≤
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÇ***REMOVED***ÂçïÊõ≤Âæ™ÁéØ***REMOVED***-***REMOVED***ÈáçÂ§çÊí≠Êîæ:',***REMOVED***currentMusic.value.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(currentMusic.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'random':
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÈöèÊú∫Êí≠ÊîæÔºöÈöèÊú∫ÈÄâÊã©‰∏ÄÈ¶ñÊ≠å
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***randomIndex***REMOVED***=***REMOVED***Math.floor(Math.random()***REMOVED*******REMOVED***playQueue.value.length)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***randomMusic***REMOVED***=***REMOVED***playQueue.value[randomIndex]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÄ***REMOVED***ÈöèÊú∫Êí≠Êîæ***REMOVED***-***REMOVED***ÈöèÊú∫ÈÄâÊã©:',***REMOVED***randomMusic.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(randomMusic)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Êí≠Êîæ‰∏ä‰∏ÄÈ¶ñ
***REMOVED******REMOVED***const***REMOVED***playPrevious***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!audio.value***REMOVED***||***REMOVED***playQueue.value.length***REMOVED***===***REMOVED***0)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentIndex***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***currentMusic.value?.id)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***switch***REMOVED***(playMode.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'list':
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂàóË°®Âæ™ÁéØÔºöÊí≠Êîæ‰∏ä‰∏ÄÈ¶ñÔºåÂà∞Á¨¨‰∏ÄÈ¶ñÊó∂ÂõûÂà∞ÊúÄÂêé‰∏ÄÈ¶ñ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***prevIndex***REMOVED***=***REMOVED***currentIndex***REMOVED***-***REMOVED***1
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(prevIndex***REMOVED***>=***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***prevMusic***REMOVED***=***REMOVED***playQueue.value[prevIndex]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚èÆÔ∏è***REMOVED***ÂàóË°®Âæ™ÁéØ***REMOVED***-***REMOVED***Êí≠Êîæ‰∏ä‰∏ÄÈ¶ñ:',***REMOVED***prevMusic.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(prevMusic)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÊúÄÂêé‰∏ÄÈ¶ñ
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***lastMusic***REMOVED***=***REMOVED***playQueue.value[playQueue.value.length***REMOVED***-***REMOVED***1]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚èÆÔ∏è***REMOVED***ÂàóË°®Âæ™ÁéØ***REMOVED***-***REMOVED***ÂõûÂà∞ÊúÄÂêé‰∏ÄÈ¶ñ:',***REMOVED***lastMusic.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(lastMusic)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'single':
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂçïÊõ≤Âæ™ÁéØÔºöÈáçÂ§çÊí≠ÊîæÂΩìÂâçÊ≠åÊõ≤
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÇ***REMOVED***ÂçïÊõ≤Âæ™ÁéØ***REMOVED***-***REMOVED***ÈáçÂ§çÊí≠Êîæ:',***REMOVED***currentMusic.value.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(currentMusic.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***case***REMOVED***'random':
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÈöèÊú∫Êí≠ÊîæÔºöÈöèÊú∫ÈÄâÊã©‰∏ÄÈ¶ñÊ≠å
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***randomIndex***REMOVED***=***REMOVED***Math.floor(Math.random()***REMOVED*******REMOVED***playQueue.value.length)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***randomMusic***REMOVED***=***REMOVED***playQueue.value[randomIndex]
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÄ***REMOVED***ÈöèÊú∫Êí≠Êîæ***REMOVED***-***REMOVED***ÈöèÊú∫ÈÄâÊã©:',***REMOVED***randomMusic.song)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(randomMusic)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***break
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÂàáÊç¢Êí≠ÊîæÈòüÂàóÊòæÁ§∫Áä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***togglePlayQueue***REMOVED***=***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***showPlayQueue.value***REMOVED***=***REMOVED***!showPlayQueue.value
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***==========***REMOVED***Êí≠ÊîæÊ®°ÂºèÁõ∏ÂÖ≥ÊñπÊ≥ï***REMOVED***==========
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂàáÊç¢Êí≠ÊîæÊ®°Âºè
***REMOVED******REMOVED***const***REMOVED***togglePlayMode***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***modes***REMOVED***=***REMOVED***['list',***REMOVED***'single',***REMOVED***'random']
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentIndex***REMOVED***=***REMOVED***modes.indexOf(playMode.value)
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***nextIndex***REMOVED***=***REMOVED***(currentIndex***REMOVED***+***REMOVED***1)***REMOVED***%***REMOVED***modes.length
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***newMode***REMOVED***=***REMOVED***modes[nextIndex]
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***playMode.value***REMOVED***=***REMOVED***newMode
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayModeToDatabase()
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊòæÁ§∫ÂàáÊç¢ÊèêÁ§∫
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***ElMessage***REMOVED***}***REMOVED***=***REMOVED***await***REMOVED***import('element-plus')
***REMOVED******REMOVED******REMOVED******REMOVED***ElMessage.success(`Â∑≤ÂàáÊç¢Âà∞${playModeName.value}Ê®°Âºè`)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÑ***REMOVED***Êí≠ÊîæÊ®°ÂºèÂàáÊç¢‰∏∫:',***REMOVED***playModeName.value)
***REMOVED******REMOVED***}
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ËÆæÁΩÆÊí≠ÊîæÊ®°Âºè
***REMOVED******REMOVED***const***REMOVED***setPlayMode***REMOVED***=***REMOVED***async***REMOVED***(mode:***REMOVED***'list'***REMOVED***|***REMOVED***'single'***REMOVED***|***REMOVED***'random')***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(playMode.value***REMOVED***===***REMOVED***mode)***REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***playMode.value***REMOVED***=***REMOVED***mode
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayModeToDatabase()
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊòæÁ§∫ÂàáÊç¢ÊèêÁ§∫
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***ElMessage***REMOVED***}***REMOVED***=***REMOVED***await***REMOVED***import('element-plus')
***REMOVED******REMOVED******REMOVED******REMOVED***ElMessage.success(`Â∑≤ÂàáÊç¢Âà∞${playModeName.value}Ê®°Âºè`)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÑ***REMOVED***Êí≠ÊîæÊ®°ÂºèËÆæÁΩÆ‰∏∫:',***REMOVED***playModeName.value)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÈáçÊñ∞ÊéíÂàóÊí≠ÊîæÈòüÂàó
***REMOVED******REMOVED***const***REMOVED***reorderQueue***REMOVED***=***REMOVED***async***REMOVED***(fromIndex:***REMOVED***number,***REMOVED***toIndex:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***music***REMOVED***=***REMOVED***playQueue.value.splice(fromIndex,***REMOVED***1)[0]
***REMOVED******REMOVED******REMOVED******REMOVED***playQueue.value.splice(toIndex,***REMOVED***0,***REMOVED***music)
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayQueueToDatabase()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈòüÂàó‰∏≠ÁöÑÈü≥‰πê
***REMOVED******REMOVED***const***REMOVED***playMusicFromQueue***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Áõ¥Êé•Êí≠ÊîæÈü≥‰πê
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***playMusic(music)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÁßªÂä®Èü≥‰πêÂà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤‰∏ãÈù¢ÔºàÁî®‰∫éÊêúÁ¥¢È°µÈù¢ÁöÑüîÑÊåâÈíÆÔºâ
***REMOVED******REMOVED***const***REMOVED***moveToCurrentPosition***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÂú®ÈòüÂàó‰∏≠
***REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***existingIndex***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***music.id)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(existingIndex***REMOVED***===***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûú‰∏çÂú®ÈòüÂàó‰∏≠ÔºåÁõ¥Êé•Ê∑ªÂä†Âà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤‰∏ãÈù¢
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***addToPlayQueueWithSync(music)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Â¶ÇÊûúÂ∑≤Âú®ÈòüÂàó‰∏≠ÔºåÂÖàÁßªÈô§
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***removeFromPlayQueueWithSync(music.id)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊâæÂà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤ÁöÑ‰ΩçÁΩÆÔºåÊèíÂÖ•Âà∞ÂÖ∂‰∏ãÈù¢
***REMOVED******REMOVED******REMOVED******REMOVED***let***REMOVED***insertIndex***REMOVED***=***REMOVED***playQueue.value.length***REMOVED***//***REMOVED***ÈªòËÆ§ÊèíÂÖ•Âà∞ÈòüÂ∞æ
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***currentIndex***REMOVED***=***REMOVED***playQueue.value.findIndex(item***REMOVED***=>***REMOVED***item.id***REMOVED***===***REMOVED***currentMusic.value?.id)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(currentIndex***REMOVED***>***REMOVED***-1)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***insertIndex***REMOVED***=***REMOVED***currentIndex***REMOVED***+***REMOVED***1***REMOVED***//***REMOVED***ÊèíÂÖ•Âà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤ÁöÑ‰∏ãÈù¢
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊèíÂÖ•Ê≠åÊõ≤
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***addToPlayQueueWithSync(music,***REMOVED***insertIndex)
***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÑ***REMOVED***ÁßªÂä®Èü≥‰πêÂà∞ÂΩìÂâçÊí≠ÊîæÊ≠åÊõ≤‰∏ãÈù¢:',***REMOVED***music.song)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈòüÂàóÊï∞ÊçÆÂ∫ìÂêåÊ≠•ÊñπÊ≥ï
***REMOVED******REMOVED***
***REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Êí≠ÊîæÈòüÂàóÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED***const***REMOVED***syncPlayQueueToDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂêåÊ≠•Êí≠ÊîæÈòüÂàóÂà∞Êï∞ÊçÆÂ∫ì')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÑ***REMOVED***ÂºÄÂßãÂêåÊ≠•Êí≠ÊîæÈòüÂàóÂà∞Êï∞ÊçÆÂ∫ìÔºåÁî®Êà∑ID:',***REMOVED***userStore.currentUser.id,***REMOVED***'ÈòüÂàóÈïøÂ∫¶:',***REMOVED***playQueue.value.length)

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê∏ÖÁ©∫Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊí≠ÊîæÈòüÂàó
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üóëÔ∏è***REMOVED***Ê∏ÖÁ©∫Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊí≠ÊîæÈòüÂàó...')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***clearResponse***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-queue/clear/${userStore.currentUser.id}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'DELETE'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('Ê∏ÖÁ©∫ÂìçÂ∫îÁä∂ÊÄÅ:',***REMOVED***clearResponse.status)

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊâπÈáèÊ∑ªÂä†ÂΩìÂâçÊí≠ÊîæÈòüÂàóÂà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(playQueue.value.length***REMOVED***>***REMOVED***0)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üì§***REMOVED***ÂêåÊ≠•Êí≠ÊîæÈòüÂàóÂà∞Êï∞ÊçÆÂ∫ì...')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-queue/reorder/${userStore.currentUser.id}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'PUT',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***headers:***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***'Content-Type':***REMOVED***'application/json',
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***},
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***body:***REMOVED***JSON.stringify(playQueue.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üì°***REMOVED***ÂêåÊ≠•Êí≠ÊîæÈòüÂàóAPIÂìçÂ∫î:',***REMOVED***result)

***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæÈòüÂàóÂêåÊ≠•ÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÈòüÂàóÂêåÊ≠•Â§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ÑπÔ∏è***REMOVED***Êí≠ÊîæÈòüÂàó‰∏∫Á©∫ÔºåÊó†ÈúÄÂêåÊ≠•')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÂêåÊ≠•Êí≠ÊîæÈòüÂàóÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***‰ªéÊï∞ÊçÆÂ∫ìÂä†ËΩΩÊí≠ÊîæÈòüÂàó
***REMOVED******REMOVED***const***REMOVED***loadPlayQueueFromDatabase***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÔºåÊó†Ê≥ïÂä†ËΩΩÊí≠ÊîæÈòüÂàó')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***console.log('üîÑ***REMOVED***ÂºÄÂßãÂä†ËΩΩÁî®Êà∑Êí≠ÊîæÈòüÂàóÔºåÁî®Êà∑ID:',***REMOVED***userStore.currentUser.id)

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-play-queue/user/${userStore.currentUser.id}`)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('üì°***REMOVED***Êí≠ÊîæÈòüÂàóAPIÂìçÂ∫î:',***REMOVED***result)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***playQueue.value***REMOVED***=***REMOVED***result.data
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Êí≠ÊîæÈòüÂàóÂä†ËΩΩÊàêÂäüÔºåÂÖ±',***REMOVED***result.data.length,***REMOVED***'È¶ñÈü≥‰πê')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÈòüÂàóÂä†ËΩΩÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Êí≠ÊîæÈòüÂàóÂä†ËΩΩÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Ê∑ªÂä†Èü≥‰πêÂà∞Êí≠ÊîæÈòüÂàóÔºàÂ∏¶Êï∞ÊçÆÂ∫ìÂêåÊ≠•Ôºâ
***REMOVED******REMOVED***const***REMOVED***addToPlayQueueWithSync***REMOVED***=***REMOVED***async***REMOVED***(music:***REMOVED***Music,***REMOVED***insertIndex?:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂÖàÊ∑ªÂä†Âà∞Êú¨Âú∞ÈòüÂàó
***REMOVED******REMOVED******REMOVED******REMOVED***addToQueue(music,***REMOVED***insertIndex)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayQueueToDatabase()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***‰ªéÊí≠ÊîæÈòüÂàóÁßªÈô§Èü≥‰πêÔºàÂ∏¶Êï∞ÊçÆÂ∫ìÂêåÊ≠•Ôºâ
***REMOVED******REMOVED***const***REMOVED***removeFromPlayQueueWithSync***REMOVED***=***REMOVED***async***REMOVED***(musicId:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂÖà‰ªéÊú¨Âú∞ÈòüÂàóÁßªÈô§
***REMOVED******REMOVED******REMOVED******REMOVED***removeFromQueue(musicId)
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayQueueToDatabase()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***Ê∏ÖÁ©∫Êí≠ÊîæÈòüÂàóÔºàÂ∏¶Êï∞ÊçÆÂ∫ìÂêåÊ≠•Ôºâ
***REMOVED******REMOVED***const***REMOVED***clearPlayQueueWithSync***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂÖàÊ∏ÖÁ©∫Êú¨Âú∞ÈòüÂàó
***REMOVED******REMOVED******REMOVED******REMOVED***clearQueue()
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂêåÊ≠•Âà∞Êï∞ÊçÆÂ∫ì
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***syncPlayQueueToDatabase()
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÈáçÊñ∞ÊéíÂ∫èÊí≠ÊîæÈòüÂàóÔºàÂ∏¶Êï∞ÊçÆÂ∫ìÂêåÊ≠•Ôºâ
***REMOVED******REMOVED***const***REMOVED***reorderPlayQueueWithSync***REMOVED***=***REMOVED***async***REMOVED***(fromIndex:***REMOVED***number,***REMOVED***toIndex:***REMOVED***number)***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂÖàÈáçÊñ∞ÊéíÂ∫èÊú¨Âú∞ÈòüÂàó
***REMOVED******REMOVED******REMOVED******REMOVED***await***REMOVED***reorderQueue(fromIndex,***REMOVED***toIndex)
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***==========***REMOVED***Êî∂ËóèÁõ∏ÂÖ≥ÊñπÊ≥ï***REMOVED***==========

***REMOVED******REMOVED***//***REMOVED***Ê£ÄÊü•ÂΩìÂâçÈü≥‰πêÊòØÂê¶Â∑≤Êî∂Ëóè
***REMOVED******REMOVED***const***REMOVED***checkCurrentMusicFavoriteStatus***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser***REMOVED***||***REMOVED***!currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-favorites/check?userId=${userStore.currentUser.id}&musicId=${currentMusic.value.id}`)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked.value***REMOVED***=***REMOVED***result.data
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Ê£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÊàêÂäü:',***REMOVED***isCurrentMusicLiked.value)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Ê£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Ê£ÄÊü•Êî∂ËóèÁä∂ÊÄÅÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}

***REMOVED******REMOVED***//***REMOVED***ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅ
***REMOVED******REMOVED***const***REMOVED***toggleFavorite***REMOVED***=***REMOVED***async***REMOVED***()***REMOVED***=>***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(!userStore.isLoggedIn***REMOVED***||***REMOVED***!userStore.currentUser***REMOVED***||***REMOVED***!currentMusic.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚ùå***REMOVED***Áî®Êà∑Êú™ÁôªÂΩïÊàñÊ≤°ÊúâÂΩìÂâçÊí≠ÊîæÈü≥‰πê')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***return
***REMOVED******REMOVED******REMOVED******REMOVED***}

***REMOVED******REMOVED******REMOVED******REMOVED***try***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(isCurrentMusicLiked.value)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÂèñÊ∂àÊî∂Ëóè
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-favorites/remove?userId=${userStore.currentUser.id}&musicId=${currentMusic.value.id}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'DELETE'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked.value***REMOVED***=***REMOVED***false
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***ÂèñÊ∂àÊî∂ËóèÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊòæÁ§∫ÊèêÁ§∫
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***ElMessage***REMOVED***}***REMOVED***=***REMOVED***await***REMOVED***import('element-plus')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ElMessage.success('Â∑≤ÂèñÊ∂àÊî∂Ëóè')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÂèñÊ∂àÊî∂ËóèÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Ê∑ªÂä†Êî∂Ëóè
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***response***REMOVED***=***REMOVED***await***REMOVED***fetch(`http://localhost:9092/api/user-favorites/add?userId=${userStore.currentUser.id}&musicId=${currentMusic.value.id}&musicMid=${currentMusic.value.mid}&musicSong=${encodeURIComponent(currentMusic.value.song)}&musicSinger=${encodeURIComponent(currentMusic.value.singer)}&musicAlbum=${encodeURIComponent(currentMusic.value.album***REMOVED***||***REMOVED***'')}&musicCover=${encodeURIComponent(currentMusic.value.cover***REMOVED***||***REMOVED***'')}&musicTime=${encodeURIComponent(currentMusic.value.time***REMOVED***||***REMOVED***'')}&musicPay=${encodeURIComponent(currentMusic.value.pay***REMOVED***||***REMOVED***'')}`,***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***method:***REMOVED***'POST'
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***})
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***result***REMOVED***=***REMOVED***await***REMOVED***response.json()
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***if***REMOVED***(response.ok***REMOVED***&&***REMOVED***result.code***REMOVED***===***REMOVED***200)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked.value***REMOVED***=***REMOVED***true
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.log('‚úÖ***REMOVED***Ê∑ªÂä†Êî∂ËóèÊàêÂäü')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊòæÁ§∫ÊèêÁ§∫
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***const***REMOVED***{***REMOVED***ElMessage***REMOVED***}***REMOVED***=***REMOVED***await***REMOVED***import('element-plus')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***ElMessage.success('Â∑≤Ê∑ªÂä†Âà∞ÊàëÁöÑÂñúÊ¨¢')
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***else***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***Ê∑ªÂä†Êî∂ËóèÂ§±Ë¥•:',***REMOVED***result.message)
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED******REMOVED******REMOVED***}***REMOVED***catch***REMOVED***(error)***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED******REMOVED******REMOVED***console.error('‚ùå***REMOVED***ÂàáÊç¢Êî∂ËóèÁä∂ÊÄÅÈîôËØØ:',***REMOVED***error)
***REMOVED******REMOVED******REMOVED******REMOVED***}
***REMOVED******REMOVED***}


***REMOVED******REMOVED***return***REMOVED***{
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Áä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***currentMusic,
***REMOVED******REMOVED******REMOVED******REMOVED***musicList,
***REMOVED******REMOVED******REMOVED******REMOVED***isPlaying,
***REMOVED******REMOVED******REMOVED******REMOVED***isLoading,
***REMOVED******REMOVED******REMOVED******REMOVED***searchKeyword,
***REMOVED******REMOVED******REMOVED******REMOVED***currentTime,
***REMOVED******REMOVED******REMOVED******REMOVED***duration,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êó†ÈôêÊªöÂä®Áä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***currentPage,
***REMOVED******REMOVED******REMOVED******REMOVED***hasMoreData,
***REMOVED******REMOVED******REMOVED******REMOVED***isLoadingMore,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈòüÂàóÁä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***playQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***showPlayQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Èü≥ÈáèÊéßÂà∂Áä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***volume,
***REMOVED******REMOVED******REMOVED******REMOVED***isMuted,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÊ®°ÂºèÁä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***playMode,
***REMOVED******REMOVED******REMOVED******REMOVED***playModeIcon,
***REMOVED******REMOVED******REMOVED******REMOVED***playModeName,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êî∂ËóèÁä∂ÊÄÅ
***REMOVED******REMOVED******REMOVED******REMOVED***isCurrentMusicLiked,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ËÆ°ÁÆóÂ±ûÊÄß
***REMOVED******REMOVED******REMOVED******REMOVED***hasCurrentMusic,
***REMOVED******REMOVED******REMOVED******REMOVED***progress,
***REMOVED******REMOVED******REMOVED******REMOVED***queueCount,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***ÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***initAudio,
***REMOVED******REMOVED******REMOVED******REMOVED***searchMusic,
***REMOVED******REMOVED******REMOVED******REMOVED***loadMoreMusic,
***REMOVED******REMOVED******REMOVED******REMOVED***playMusic,
***REMOVED******REMOVED******REMOVED******REMOVED***togglePlay,
***REMOVED******REMOVED******REMOVED******REMOVED***stopMusic,
***REMOVED******REMOVED******REMOVED******REMOVED***setProgress,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Èü≥ÈáèÊéßÂà∂ÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***setVolume,
***REMOVED******REMOVED******REMOVED******REMOVED***toggleMute,
***REMOVED******REMOVED******REMOVED******REMOVED***mute,
***REMOVED******REMOVED******REMOVED******REMOVED***unmute,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÊ®°ÂºèÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***togglePlayMode,
***REMOVED******REMOVED******REMOVED******REMOVED***setPlayMode,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæËÆæÁΩÆÊï∞ÊçÆÂ∫ìÂêåÊ≠•ÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***syncVolumeToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***syncMuteStatusToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***syncPlayModeToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***syncPlayProgressToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***syncPlayProgressImmediately,
***REMOVED******REMOVED******REMOVED******REMOVED***syncCurrentMusicToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***syncPlayStatusToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***loadPlaySettingsFromDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈòüÂàóÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***addToQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***removeFromQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***clearQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***playNext,
***REMOVED******REMOVED******REMOVED******REMOVED***playPrevious,
***REMOVED******REMOVED******REMOVED******REMOVED***togglePlayQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***reorderQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***playMusicFromQueue,
***REMOVED******REMOVED******REMOVED******REMOVED***moveToCurrentPosition,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êí≠ÊîæÈòüÂàóÊï∞ÊçÆÂ∫ìÂêåÊ≠•ÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***syncPlayQueueToDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***loadPlayQueueFromDatabase,
***REMOVED******REMOVED******REMOVED******REMOVED***addToPlayQueueWithSync,
***REMOVED******REMOVED******REMOVED******REMOVED***removeFromPlayQueueWithSync,
***REMOVED******REMOVED******REMOVED******REMOVED***clearPlayQueueWithSync,
***REMOVED******REMOVED******REMOVED******REMOVED***reorderPlayQueueWithSync,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***Êî∂ËóèÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***checkCurrentMusicFavoriteStatus,
***REMOVED******REMOVED******REMOVED******REMOVED***toggleFavorite,
***REMOVED******REMOVED******REMOVED******REMOVED***
***REMOVED******REMOVED******REMOVED******REMOVED***//***REMOVED***‰∏ãËΩΩÊñπÊ≥ï
***REMOVED******REMOVED******REMOVED******REMOVED***downloadMusic
***REMOVED******REMOVED***}
})
